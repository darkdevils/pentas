<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <title>공기알관리</title>
</head>
<body>
<div id="wrap">
    <div id="header">
        <button type="button" class="btn_prev"><span class="blind">이전</span></button>
        <h1 class="title">공기알관리</h1>
        <div class="right_area">
            <button type="button" class="btn_home"><span class="blind">홈</span></button>
            <button type="button" class="btn_total_menu"><span class="blind">전체메뉴</span></button>
        </div>
    </div>
    <div id="container">
        <div id="content" class="sub_content">
            <div id="sort" class="piece_admin">
                <div id="test1" class="list_wrap">
                    <!-- 공기알 관리 -->
                    <div class="list_wrap__item">
                        <div class="item_cotent">
                            <div class="block">
                                <div class="name_area">
                                    <a href="#" class="layer_open" aria-controls="slide_layer01">
                                        <span class="icon"><img src="../images/orange_gonggi01.svg" alt=""></span>
                                        <span class="name">공기알1 <em>2</em></span>
                                    </a>
                                </div>
                                <button type="button" class="handle"><span class="blind">이동</span></button>
                            </div>
                            <button type="button" class="btn_del">삭제</button>
                        </div>
                    </div>
                    <!-- //공기알 관리 -->
                    <div class="list_wrap__item">
                        <div class="item_cotent">
                            <div class="block">
                                <div class="name_area">
                                    <a href="#" class="layer_open" aria-controls="slide_layer01">
                                        <span class="icon"><img src="../images/blue_gonggi02.svg" alt=""></span>
                                        <span class="name">공기알2 <em>2</em></span>
                                    </a>
                                </div>
                                <button type="button" class="handle"><span class="blind">이동</span></button>
                            </div>
                            <button type="button" class="btn_del">삭제</button>
                        </div>
                    </div>
                    <div class="list_wrap__item">
                        <div class="item_cotent">
                            <div class="block">
                                <div class="name_area">
                                    <a href="#" class="layer_open" aria-controls="slide_layer01">
                                        <span class="icon"><img src="../images/yellow_gonggi03.svg" alt=""></span>
                                        <span class="name">공기알3 <em>2</em></span>
                                    </a>
                                </div>
                                <button type="button" class="handle"><span class="blind">이동</span></button>
                            </div>
                            <button type="button" class="btn_del">삭제</button>
                        </div>
                    </div>
                    <div class="list_wrap__item">
                        <div class="item_cotent">
                            <div class="block">
                                <div class="name_area">
                                    <a href="#" class="layer_open" aria-controls="slide_layer01">
                                        <span class="icon"><img src="../images/pink_gonggi04.svg" alt=""></span>
                                        <span class="name">공기알4 <em>2</em></span>
                                    </a>
                                </div>
                                <button type="button" class="handle"><span class="blind">이동</span></button>
                            </div>
                            <button type="button" class="btn_del">삭제</button>
                        </div>
                    </div>
                    <div class="list_wrap__item">
                        <div class="item_cotent">
                            <div class="block">
                                <div class="name_area">
                                    <a href="#" class="layer_open" aria-controls="slide_layer01">
                                        <span class="icon"><img src="../images/green_gonggi01.svg" alt=""></span>
                                        <span class="name">공기알5 <em>99</em></span>
                                    </a>
                                </div>
                                <button type="button" class="handle"><span class="blind">이동</span></button>
                            </div>
                            <button type="button" class="btn_del">삭제</button>
                        </div>
                    </div>
                </div>
            </div>

            <ul class="tip_list">
                <li>공기알 이름을 터치하면 이름을 수정할 수 있어요.</li>
                <li>아이콘(<i class="icon"></i>)을 눌러 순서를 바꿀 수 있어요.</li>
                <li>왼쪽으로 밀면 공기알을 삭제할 수 있어요.</li>
            </ul>
        </div>
    </div>
</div>

<!-- 공기알 추가 레이어 팝업 -->
<div class="layer_popup_wrap slide_layer" id="slide_layer01">
    <div class="layer_popup_header">
        <h2 class="title">공기알 추가</h2>
        <button type="button" class="layer_popup_close"><span class="blind">닫기</span></button>
    </div>
    <div class="layer_popup_body">
        <!-- 주황색 공기알 -->
        <div id="color1" class="color_swiper on">
            <div class="swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide"><img src="../images/orange_gonggi01.svg" alt="주황공기알1"></div>
                    <div class="swiper-slide"><img src="../images/orange_gonggi02.svg" alt="주황공기알2"></div>
                    <div class="swiper-slide"><img src="../images/orange_gonggi03.svg" alt="주황공기알3"></div>
                    <div class="swiper-slide"><img src="../images/orange_gonggi04.svg" alt="주황공기알4"></div>
                    <div class="swiper-slide"><img src="../images/orange_gonggi05.svg" alt="주황공기알5"></div>
                </div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </div>
        <!-- //주황색 공기알 -->
        <!-- 파란색 공기알 -->
        <div id="color2" class="color_swiper">
            <div class="swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide"><img src="../images/blue_gonggi01.svg" alt="파란공기알1"></div>
                    <div class="swiper-slide"><img src="../images/blue_gonggi02.svg" alt="파란공기알2"></div>
                    <div class="swiper-slide"><img src="../images/blue_gonggi03.svg" alt="파란공기알3"></div>
                    <div class="swiper-slide"><img src="../images/blue_gonggi04.svg" alt="파란공기알4"></div>
                    <div class="swiper-slide"><img src="../images/blue_gonggi05.svg" alt="파란공기알5"></div>
                </div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </div>
        <!-- //파란색 공기알 -->
        <!-- 노란색 공기알 -->
        <div id="color3" class="color_swiper">
            <div class="swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide"><img src="../images/yellow_gonggi01.svg" alt="노란공기알1"></div>
                    <div class="swiper-slide"><img src="../images/yellow_gonggi02.svg" alt="노란공기알2"></div>
                    <div class="swiper-slide"><img src="../images/yellow_gonggi03.svg" alt="노란공기알3"></div>
                    <div class="swiper-slide"><img src="../images/yellow_gonggi04.svg" alt="노란공기알4"></div>
                    <div class="swiper-slide"><img src="../images/yellow_gonggi05.svg" alt="노란공기알5"></div>
                </div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </div>
        <!-- //노란색 공기알 -->
        <!-- 분홍색 공기알 -->
        <div id="color4" class="color_swiper">
            <div class="swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide"><img src="../images/pink_gonggi01.svg" alt="분홍공기알1"></div>
                    <div class="swiper-slide"><img src="../images/pink_gonggi02.svg" alt="분홍공기알2"></div>
                    <div class="swiper-slide"><img src="../images/pink_gonggi03.svg" alt="분홍공기알3"></div>
                    <div class="swiper-slide"><img src="../images/pink_gonggi04.svg" alt="분홍공기알4"></div>
                    <div class="swiper-slide"><img src="../images/pink_gonggi05.svg" alt="분홍공기알5"></div>
                </div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </div>
        <!-- //분홍색 공기알 -->
        <!-- 녹색 공기알 -->
        <div id="color5" class="color_swiper">
            <div class="swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide"><img src="../images/green_gonggi01.svg" alt="녹색공기알1"></div>
                    <div class="swiper-slide"><img src="../images/green_gonggi02.svg" alt="녹색공기알2"></div>
                    <div class="swiper-slide"><img src="../images/green_gonggi03.svg" alt="녹색공기알3"></div>
                    <div class="swiper-slide"><img src="../images/green_gonggi04.svg" alt="녹색공기알4"></div>
                    <div class="swiper-slide"><img src="../images/green_gonggi05.svg" alt="녹색공기알5"></div>
                </div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </div>
        <!-- //녹색 공기알 -->
        <form action="">
            <div class="gonggi_color_select">
                <div class="radio_item"><input type="radio" name="option" id="orange" onclick="showColor('color1');" checked><label for="orange"><span class="blind">주황색</span></label></div>
                <div class="radio_item"><input type="radio" name="option" id="blue" onclick="showColor('color2')"><label for="blue"><span class="blind">파란색</span></label></div>
                <div class="radio_item"><input type="radio" name="option" id="yellow" onclick="showColor('color3')"><label for="yellow"><span class="blind">노란색</span></label></div>
                <div class="radio_item"><input type="radio" name="option" id="pink" onclick="showColor('color4')"><label for="pink"><span class="blind">분홍색</span></label></div>
                <div class="radio_item"><input type="radio" name="option" id="green" onclick="showColor('color5')"><label for="green"><span class="blind">녹색</span></label></div>
            </div>
        </form>
        <div class="input_wrap gonggi_name">
            <div class="input_inner">
                <input type="text" name="" id="" maxlength="5" placeholder="공기알 이름을 입력해주세요">
            </div>
            <div class="font_size">
                <span class="current">0</span>/<span class="total">5</span>
            </div>
        </div>
    </div>
    <div class="layer_popup_button">
        <button type="button" class="btn" disabled><span>확인</span></button>
    </div>
</div>
<!-- //공기알 추가 레이어 팝업 -->

<script src="../js/lib/jquery-3.7.0.min.js"></script>
<script src="../js/lib/swiper-bundle.min.js"></script>
<script src="../js/lib/sortable.min.js"></script>
<script src="../js/common.js"></script>
<script>
    // 공기알,피스관리 이동하기 스크립트
    document.querySelector('.sub_content').style.overflow = "hidden";
    new Sortable(test1, {
        handle: '.handle', // handle's class
        animation: 150,
        //ghostClass: 'changeColor'
    });

    //let touchArea = document.querySelectorAll(".list_wrap__item");
    let touchArea = $(".list_wrap__item");

    let mouseX,
        initialX = 0;
    let mouseY,
        initialY = 0;
    let isSwiped;

    let events = {
        mouse: {
            down: "mousedown",
            move: "mousemove",
            up: "mouseup",
        },
        touch: {
            down: "touchstart",
            move: "touchmove",
            up: "touchend",
        },
    }

    let deviceType = "";

    const isTouchDevice = () => {
        try {
            document.createEvent("TouchEvent");
            deviceType = "touch";
            return true;
        } catch (e) {
            deviceType = "mouse";
            return false;
        }
    }

    let rectLeft = touchArea.offset().left;
    let rectTop = touchArea.offset().top;

    const getXY = (e) => {
        mouseX = (!isTouchDevice() ? e.pageX : e.touches[0].pageX) - rectLeft;
        mouseY = (!isTouchDevice() ? e.pageY : e.touches[0].pageY) - rectTop;
    };

    isTouchDevice();

    touchArea.on('touchstart', function(event) {
        isSwiped = true;
        getXY(event);
        initialX = mouseX;
        initialY = mouseY;
    });

    touchArea.find('.name_area').on("touchmove",function(event){

        const _this = $(this);
        if(!isTouchDevice()) {
            event.preventDefault();
        }
        if(isSwiped) {
            getXY(event);
            let diffX = mouseX - initialX;
            let diffY = mouseY - initialY;
            if( diffX > 0 ) {
                _this.closest('.item_cotent').removeClass('left');
            } else {
                _this.closest('.item_cotent').addClass('left');
                _this.closest('.list_wrap__item').addClass('active').siblings().removeClass('active');
            }
        }
    });

    touchArea.on("touchend",function(event){
        isSwiped = false;
    })

    touchArea.on("mouseleave", () => {
        isSwiped = false;
    });

    window.onload = () => {
        isSwiped = false;
    };

    // 삭제버튼
    $('.btn_del').on('click',function(){
        $(this).closest('.list_wrap__item').remove();
    });

</script>
</body>
</html>