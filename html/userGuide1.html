<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <title>이용가이드</title>
</head>
<body>
<div class="user_guide user_guide__01">
    <div class="user_guide_header">
        <h1 class="title">공기 이용 가이드</h1>
        <button type="button"><span class="blind">닫기</span></button>
    </div>
    <div class="user_guide_content">
        <div class="main_icon">
            <img src="../images/guide_icon.svg" alt="">
            <div class="round"></div>
        </div>
        <div class="icon01"></div>
        <div class="icon02"></div>
        <div class="icon03"></div>
        <div class="icon04"></div>
        <div class="typing_area_text">
            <div>안녕 만나서 반가워! 내 이름은 뤤지야.</div>
            <div>공기를 처음 이용하는 너를 위해</div>
            <div>특별히 내가 몇 가지 사용 팁을 알려주려 해!</div>
        </div>
        <div class="typing_area">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <div class="btn_wrap fixed">
        <button type="button" class="btn btn--big orange">그래 좋아 알려줘!</button>
        <button type="button" class="btn btn--big mgTop10">아니, 다음에 알려줘...</button>
    </div>
</div>


<script src="../js/lib/jquery-3.7.0.min.js"></script>
<script src="../js/lib/swiper-bundle.min.js"></script>
<script src="../js/common.js"></script>

<script>
    let typingBool = false;
    let typingIdx=0;
    let liIndex = 0;
    let liLength = $(".typing_area_text > div").length;

    // 타이핑될 텍스트를 가져온다
    let typingTxt = $(".typing_area_text > div").eq(liIndex).text();
    typingTxt=typingTxt.split(""); // 한글자씩 자른다.
    if(typingBool==false){ // 타이핑이 진행되지 않았다면
        typingBool=true;
        var tyInt = setInterval(typing,100); // 반복동작
    }

    function typing(){
        $(".typing_area div").removeClass("on");
        $(".typing_area div").eq(liIndex).addClass("on");
        if(typingIdx<typingTxt.length){ // 타이핑될 텍스트 길이만큼 반복
            $(".typing_area div").eq(liIndex).append(typingTxt[typingIdx]); // 한글자씩 이어준다.
            typingIdx++;
        } else{ if(liIndex<liLength-1){
            //다음문장으로  가기위해 인덱스를 1증가
            liIndex++;
            //다음문장을 타이핑하기위한 셋팅


            typingIdx=0;
            typingBool = false;
            typingTxt = $(".typing_area_text > div").eq(liIndex).text();

            //다음문장 타이핑전 1초 쉰다
            clearInterval(tyInt);
            //타이핑종료

            setTimeout(function(){
                //1초후에 다시 타이핑 반복 시작
                tyInt = setInterval(typing,100);
            },1000);
        } else if(liIndex==liLength-1){

            //마지막 문장까지 써지면 반복종료
            clearInterval(tyInt);
        }
        }
    }
</script>
</body>
</html>